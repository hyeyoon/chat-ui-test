@import "tailwindcss";

:root {
  /* Safe area insets for devices with notches */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  
  /* VirtualKeyboard API support */
  --keyboard-inset-height: env(keyboard-inset-height, 0px);
  
  /* Real viewport height - iOS Safari keyboard fix */
  --app-height: 100vh;
  --actual-viewport-height: 100vh;
  
  /* Dynamic viewport height - 2024 modern solution */
  --vh: 100vh;
  --dvh: 100dvh;
}

/* iOS Safari viewport fix - Use custom property for actual height */
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  overflow: hidden;
  
  /* iOS Safari keyboard fix: Use JS-calculated height */
  height: 100vh;
  height: var(--app-height);
  
  /* Prevent bounce scrolling on iOS */
  overscroll-behavior: none;
  
  /* Prevent text size adjust on orientation change */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

#root {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

* {
  box-sizing: border-box;
}

/* Remove complex layout - let JS handle viewport */

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) {
  /* Prevent zoom on input focus */
  input, textarea, select {
    font-size: 16px;
    -webkit-appearance: none;
  }
  
  /* Disable text selection callouts globally */
  * {
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Re-enable text selection for inputs */
  input, textarea {
    -webkit-touch-callout: default;
    -webkit-user-select: text;
    user-select: text;
  }
}

/* Modern CSS environment variable support */
@supports (padding: env(safe-area-inset-top)) {
  .safe-area {
    padding-top: env(safe-area-inset-top);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
  }
}

/* VirtualKeyboard API support detection */
@supports (height: env(keyboard-inset-height)) {
  .keyboard-aware {
    margin-bottom: env(keyboard-inset-height, 0px);
  }
}

/* iOS Safari specific blank space fixes */
@supports (-webkit-touch-callout: none) {
  /* Fix for iOS Safari viewport issues */
  body {
    position: relative;
    overflow-x: hidden;
  }
  
  /* Prevent iOS Safari from shifting layout */
  #root {
    position: relative;
    overflow: hidden;
  }
  
  /* iOS keyboard specific fixes */
  .keyboard-aware {
    /* Ensure input stays at bottom on iOS */
    position: sticky;
    bottom: 0;
    z-index: 1000;
  }
}

/* Modern input styling to prevent zoom on iOS */
input, textarea {
  font-size: max(16px, 1rem);
  background-color: white;
  border-radius: 0.5rem;
  border: 1px solid #e5e7eb;
  padding: 0.75rem;
  outline: none;
  transition: border-color 0.15s ease-in-out;
}

input:focus, textarea:focus {
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Platform-specific keyboard states */
.ios-keyboard-active, .android-keyboard-active {
  overscroll-behavior: none !important;
}

/* Input area styling when keyboard is active */
.keyboard-input-active {
  border-top: 1px solid #e5e7eb;
  box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1), 0 -2px 4px -1px rgba(0, 0, 0, 0.06);
  background-color: white !important;
}